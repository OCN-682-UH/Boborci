---
title: "Week 13 Homework"
author: "Madigan Boborci"
format:
  html:
    toc: true
    theme: cerulean
    mainfont: "Georgia"
    prefer-html: true
execute: 
  message: false 
  warning: false 
---

## Intro:
For today's homework, the goal is to bring in all 4 files and calculate the mean and standard deviation of both temperature (Temp.C) and light (Intensity.lux) for each tide pool


## Libraries:
```{r}
#| code-fold: true
library(here)
library(tidyverse)
```

## For Loop Section:

### Test:
```{r}
#| code-fold: true

#just test her out
testdata<-read_csv(here("Week_13", "Data", "homework","TP1.csv"))
glimpse(testdata) #ok cool it exists and works 
```
### Make filepath:
```{r}
#| code-fold: true

#make path
TidePath<-here("Week_13", "Data","homework")  
#then use regex to find csv files
files<-dir(path=TidePath, pattern=".csv") #could specify site etc wtih regex pattern
files #yay
```

### Allocate Space:
```{r}
#| code-fold: true

#now we need to make space for it 
tidepool_data<-tibble(filename =  rep(NA, length(files)),  # column name for files
                  mean_temp = rep(NA, length(files)), # column name for the mean temperature
                  mean_light = rep(NA, length(files))) # column name for the mean salinity-length is files- will use my four files from my TidePath

tidepool_data #I am so scared something is gonna be wrong I am checking every 5 seconds
```
### Basic Means Code:
```{r}
#| code-fold: true


#use paths and basic code to find means
raw_data<-read_csv(paste0(TidePath,"/", files[1]))
head(raw_data)



mean_temp<-mean(raw_data$Temp.C, na.rm = TRUE) # calculate a mean
mean_light<-mean(raw_data$Intensity.lux, na.rm=TRUE) #calculate this mean
mean_temp    #should be mean of first file
mean_light   #should be mean light of first file
```
### Make For Loop:
```{r}
#Okay now actually make the forloop
for (i in 1:length(files)){           
  raw_data<-read_csv(paste0(TidePath,"/",files[i]))
  #glimpse(raw_data) #makes everyhting run slow if you leave running 
  tidepool_data$filename[i]<-files[i]    #calls empty dataframe and should add the filenames
  tidepool_data$mean_temp[i]<-mean(raw_data$Temp.C, na.rm=TRUE) #calls empty dataframe and should add the mean temps
  tidepool_data$mean_light[i]<-mean(raw_data$Intensity.lux, na.rm=TRUE)   #calls empty dataframe and should add the mean light
}

tidepool_data
```

## Map Section:

### Edit files and file path to work in tidy:
```{r}
#| code-fold: true

#take files from earlier 
files
#map needs full file name
files<- dir(path=TidePath, pattern=".csv", full.names=TRUE)  #save full path name
files

```
### Set up dataframe to map to:
```{r}
#| code-fold: true

Tidepool_data<-files %>%
  set_names()%>% #sets id of each to filename
  map_df(read_csv, .id="filename") #maps to the dataframe and puts the id in a column called filename, the function is read_csv
  
Tidepool_data   #yay- we see a dataframe with all the data on top of eachother from our files
```

### Group by filename, find mean Temp and Light:

```{r}
Tidepool_data<-files %>%
  set_names()%>% #sets id of each to filename
  map_df(read_csv, .id="filename")%>% #maps to the dataframe and puts the id in a column called filename, the function is read_csv
  group_by(filename) %>%    #our normal group by function
  summarise(mean_temp = mean(Temp.C, na.rm = TRUE),  #tidy way of finding means
            mean_light = mean(Intensity.lux,na.rm = TRUE))

Tidepool_data

```

## Both Dataframes:
```{r}
tidepool_data
Tidepool_data
```


## Summary:
I used both for loop and mapping methods to read in data and pull means from those datasets. I think this is a really useful tool, it's just really hard for me to wrap my head around. Doing it from scratch myself right after class helped a little, and I'm going to try to use this in my final project instead of doing thigs individually to see if I can make it a part of my repertoire.








